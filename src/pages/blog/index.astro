---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogCard from '../../components/BlogCard.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog', ({ data }) => !data.draft);
const posts = allPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Blog" description="Exploramos la ciencia detrás de la recuperación y el bienestar moderno.">
  <section class="max-w-6xl mx-auto px-6 py-20">
    <!-- Header -->
    <div class="mb-16">
      <h1 class="text-4xl md:text-6xl font-heading font-extrabold tracking-tight leading-none text-ll-white mb-4">
        Blog
      </h1>
      <p class="text-lg font-inter font-300 text-white/40 max-w-xl">
        Ciencia, recuperación y bienestar moderno. Ideas para vivir mejor.
      </p>
    </div>

    <!-- Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12">
      {posts.map(post => (
        <BlogCard
          title={post.data.title}
          description={post.data.description}
          date={post.data.date}
          image={post.data.image}
          imageAlt={post.data.imageAlt}
          tags={post.data.tags}
          readingTime={post.data.readingTime}
          slug={post.slug}
        />
      ))}
    </div>

    {posts.length === 0 && (
      <p class="text-white/30 font-inter font-300 text-center py-20">
        Próximamente — estamos preparando contenido increíble.
      </p>
    )}
  </section>
</BaseLayout>
